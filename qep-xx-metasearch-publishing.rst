.. _qep#[.#]:

=========================================================
QGIS Enhancement #XXX: MetaSearch Publishing Enhancements
=========================================================

:Date: 2015/03/26
:Author: Tom Kralidis
:Contact: tomkralidis at gmail dot com
:Last Edited: 2015/03/26
:Status:  Draft | Adopted (YYYY/MM/DD) | Completed (YYYY/MM/DD) |
          Superseded by :ref:`QEP #[.#] <qep#[.#]>` (YYYY/MM/DD) |
          Abandoned (YYYY/MM/DD) | Withdrawn (YYYY/MM/DD)
:Version: QGIS 2.10

.. note::

    See :ref:`QEP 1 <qep1>` for description of QEP process.

Summary
-------

This QEP aims to enhance MetaSearch to provide metadata publishing to CSW providing the following benefits:

- easy, standards-based metadata publishing mechanism of QGIS layer metadata at the core (no duplications or QGIS plugins)
- interchangeable CSW service to publish to (user configured)
- enhanced discovery (better metadata is more easily discovered)

Overview
--------

QIGS by default provides a Layer Properties Metadata tab which allows a user to enter various values (and select from various select boxes) under various sections like ``Description``, ``Attribution``, ``MetadataUrl``, ``LegendUrl``.  The ``Properties`` section is autogenerated from the layer and is ready only.  These values are stored in the QGIS project file within the ``<maplayer>`` element.

MetaSearch is a QGIS plugin to interact with metadata catalogue services, supporting the OGC Catalogue Service for the Web (CSW) standard.  MetaSearch provides an easy and intuitive approach and user-friendly interface to searching metadata catalogues within QGIS.

It is proposed to improve MetaSearch to add layer metadata publishing to the plugin seamlessly, efficiently, and in an authoritative manner.

This QEP will support an overall workflow per below:

``manage Layer Metadata (QGIS core) -> publish/update/delete Layer Metadata (MetaSearch) to CSW``

Proposed [Technical] Solution | Change
--------------------------------------

MetaSearch will add a 'Publishing' tab, which allows the user to:

- select from the list of CSW endpoints to publish to
- select a metadata format to publish (Dublin Core, ISO)
- click 'Publish', which does a CSW-T Insert or Update to the server.  An 'Update' button will overwrite the entire metadata record on the server.  A 'Delete' button will allow for deleting records from the CSW-T

Implementation Details
----------------------

- modify settings tab to allow for authentication against CSW-T
- add publishing tab with 'Publish' 'Update' and 'Delete' buttons

  * metadata values will be derived from Layer Properties Metadata tab values
  * select box to choose format ('Dublin Core', 'ISO').  Metadata XML will be automagically generated against an XML template, filling in values from the Layer Properties Metadata tab

Affected Files
...............

- https://github.com/qgis/QGIS/blob/master/python/plugins/MetaSearch/ui/maindialog.ui
- https://github.com/qgis/QGIS/blob/master/python/plugins/MetaSearch/dialogs/maindialog.py

Test Coverage
-------------

(required for technical solutions/changes if applicable)

Performance Implications
------------------------

No performance implications are expected at this time given the lightweight nature of this enhancement to MetaSearch.

Further Considerations/Improvements
-----------------------------------

This enhancement can be extended by adding the ability for users to upload user-defined XML templates, or select from more metadata standards/profiles.

Restrictions
------------

Backwards Compatibility
-----------------------

Given this enhancement there will be no impact on backwards compatibility. There will be a UI design/change which will not break functionality.

Documentation
-------------

Documentation will be enhanced accordingly in https://github.com/qgis/QGIS-Documentation/blob/master/source/docs/user_manual/plugins/plugins_metasearch.rst

Issue Tracking ID(s)
--------------------

(required)

References
----------

(optional)

Miscellaneous
-------------

(optional)

Voting History
--------------

(required)
